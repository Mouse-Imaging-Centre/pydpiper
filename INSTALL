To install pydpiper, both the current source and most stable release can be downloaded from github:

https://github.com/Mouse-Imaging-Centre/pydpiper

Using the Downloads button, access the .tar.gz or .zip file.
Unzip and untar and change into the source directory (e.g. cd pydpiper)
Run: python3 setup.py install 

System dependencies:

minc-toolkit v2 - https://github.com/BIC-MNI/minc-toolkit-v2
minc-stuffs - https://github.com/Mouse-Imaging-Centre/minc-stuffs
minc2-simple - https://github.com/vfonov/minc2-simple
cctools (optional; required for the Makeflow backend) - https://ccl.cse.nd.edu
Singularity (optional) - https://docs.sylabs.io/guides/latest/admin-guide/
graphviz (optional) - http://www.graphviz.org/

Various Python libraries are also required (see `setup.py` for details); these should
be installed automatically by setuptools when the above command is run.

Pydpiper has several options for executing pipelines: locally, via its own server-executor system, and via Makeflow.
We recommend one of the the latter two options for most pipelines.
Pydpiper's server-executor model uses `qbatch`](https://github.com/pipitone/qbatch) for submitting executors to compute grid queues and RPC (specifically Pyro5) for submitting jobs to and communicating with executors.
Installing Pydpiper will install the `qbatch` binary as well, but you must ensure this (and a somewhat recent version of GNU Parallel) is in your path. To configure Pydpiper for your queue using this backend, you may configure qbatch directly using `QBATCH_*` environment variables to whatever extent you desire and further specify or override whatever you choose using Pydpiper flags (or a config file or environment vars; see the README); however, the default is currently local execution so you must tell Pydpiper what `--queue-type` you intend.  (We also have a legacy "headless" mode developed for "capacity" queues such as Compute Canada's SciNet grid; this mode uses `qsub` directly and only works with TORQUE/PBS queues at the moment but may soon be retired.)  The makeflow backend is more versatile and supports a larger set of queues, but does not automatically use a server-executor model; to use this, ensure cctools is installed, start your Pydpiper pipeline with --backend=makeflow and --queue-type=... and then launch an instance of `work_queue_factory` to submit executors.

